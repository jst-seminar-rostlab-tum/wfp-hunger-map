# World Food Programme - HungerMap

<!-- ALL-CONTRIBUTORS-BADGE:START - Do not remove or modify this section -->

[![All Contributors](https://img.shields.io/badge/all_contributors-16-orange.svg?style=flat-square)](#contributors-)

<!-- ALL-CONTRIBUTORS-BADGE:END -->

This is the repository for the World Food Program's HungerMap. For a more information, check out the **[documentation](https://docs-wfp-hungermap.netlify.app/)**.

This software is dual-licensed:

1. **Open-Source License**: Distributed under the terms of the Server Side Publc License (SSPL). See the `LICENSE` file for details.
2. **Commercial License**: Available for businesses requiring proprietary use. Contact the Center for Software Engineering Excellence at partners@csee.tech for more information.
   Failure to comply with either license will constitute a violation of intellectual property rights.

## Table of contents

- [Contibutors](#contributors-)
- [Technologies Used](#technologies-used)
- [Feature highlights](#feature-highlights)
- [Local development](#local-development)
- [Deployment](#deployment)
- [Development guidelines](#development-guidelines)

## Contributors âœ¨

Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tbody>
    <tr>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/marinovl7"><img src="https://avatars.githubusercontent.com/u/99186919?v=4?s=100" width="100px;" alt="Lachezar Marinov"/><br /><sub><b>Lachezar Marinov</b></sub></a><br /><a href="#projectManagement-marinovl7" title="Project Management">ðŸ“†</a> <a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=bohdangarchu" title="Code">ðŸ’»</a> <a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/pulls?q=is%3Apr+reviewed-by%3Amarinovl7" title="Reviewed Pull Requests">ðŸ‘€</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/bohdangarchu"><img src="https://avatars.githubusercontent.com/u/107936554?v=4?s=100" width="100px;" alt="Bohdan Garchu"/><br /><sub><b>Bohdan Garchu</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=bohdangarchu" title="Code">ðŸ’»</a> <a href="#projectManagement-bohdangarchu" title="Project Management">ðŸ“†</a> <a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/pulls?q=is%3Apr+reviewed-by%3Abohdangarchu" title="Reviewed Pull Requests">ðŸ‘€</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/cansumoran"><img src="https://avatars.githubusercontent.com/u/47862390?v=4?s=100" width="100px;" alt="Cansu Moran"/><br /><sub><b>Cansu Moran</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=cansumoran" title="Code">ðŸ’»</a> <a href="#projectManagement-cansumoran" title="Project Management">ðŸ“†</a> <a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/pulls?q=is%3Apr+reviewed-by%3Acansumoran" title="Reviewed Pull Requests">ðŸ‘€</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Tschonti"><img src="https://avatars.githubusercontent.com/u/13004605?v=4?s=100" width="100px;" alt="SÃ¡muel Fekete"/><br /><sub><b>SÃ¡muel Fekete</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=Tschonti" title="Code">ðŸ’»</a> <a href="#projectManagement-Tschonti" title="Project Management">ðŸ“†</a> <a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/pulls?q=is%3Apr+reviewed-by%3ATschonti" title="Reviewed Pull Requests">ðŸ‘€</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/ahmedfarouk2000"><img src="https://avatars.githubusercontent.com/u/93868173?v=4?s=100" width="100px;" alt="Ahmed Farouk"/><br /><sub><b>Ahmed Farouk</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=ahmedfarouk2000" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/ArmanpreetGhotra"><img src="https://avatars.githubusercontent.com/u/142525678?v=4?s=100" width="100px;" alt="Armanpreet Ghotra"/><br /><sub><b>Armanpreet Ghotra</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=ArmanpreetGhotra" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Esoteriker"><img src="https://avatars.githubusercontent.com/u/51016146?v=4?s=100" width="100px;" alt="Haidong Xu"/><br /><sub><b>Haidong Xu</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=Esoteriker" title="Code">ðŸ’»</a></td>
    </tr>
    <tr>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/jschoedl"><img src="https://avatars.githubusercontent.com/u/71393992?v=4?s=100" width="100px;" alt="Jakob SchÃ¶dl"/><br /><sub><b>Jakob SchÃ¶dl</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=jschoedl" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/plaume8"><img src="https://avatars.githubusercontent.com/u/126587385?v=4?s=100" width="100px;" alt="Linus Sander"/><br /><sub><b>Linus Sander</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=plaume8" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/ahmtslmngcl"><img src="https://avatars.githubusercontent.com/u/77407148?v=4?s=100" width="100px;" alt="Ahmet Selman GÃ¼clÃ¼"/><br /><sub><b>Ahmet Selman GÃ¼clÃ¼</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=ahmtslmngcl" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/georgi4444"><img src="https://avatars.githubusercontent.com/u/76964999?v=4?s=100" width="100px;" alt="Georgi Tsipov"/><br /><sub><b>Georgi Tsipov</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=georgi4444" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Lukas0912"><img src="https://avatars.githubusercontent.com/u/109222100?v=4?s=100" width="100px;" alt="Lukas Fabio Weigmann"/><br /><sub><b>Lukas Fabio Weigmann</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=Lukas0912" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/ahmedfarouk2000"><img src="https://avatars.githubusercontent.com/u/43567515?v=4?s=100" width="100px;" alt="Georgi Peev"/><br /><sub><b>Georgi Peev</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=ahmedfarouk2000" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Marius-Moldo"><img src="https://avatars.githubusercontent.com/u/68606110?v=4?s=100" width="100px;" alt="Marius Moldovan"/><br /><sub><b>Marius Moldovan</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=Marius-Moldo" title="Code">ðŸ’»</a></td>
    </tr>
    <tr>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/memreo"><img src="https://avatars.githubusercontent.com/u/69143179?v=4?s=100" width="100px;" alt="Muhammed Emre Bayraktaroglu"/><br /><sub><b>Muhammed Emre Bayraktaroglu</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=memreo" title="Code">ðŸ’»</a></td>
      <td align="center" valign="top" width="14.28%"><a href="https://github.com/shauryainf"><img src="https://avatars.githubusercontent.com/u/101364820?v=4?s=100" width="100px;" alt="Shaurya Sharma"/><br /><sub><b>Shaurya Sharma</b></sub></a><br /><a href="https://github.com//jst-seminar-rostlab-tum/wfp-hunger-map/commits?author=shauryainf" title="Code">ðŸ’»</a></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!

## Technologies Used

- [Next.js 14](https://nextjs.org/docs/getting-started)
- [NextUI v2](https://nextui.org/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Tailwind Variants](https://tailwind-variants.org)
- [TypeScript](https://www.typescriptlang.org/)
- [Framer Motion](https://www.framer.com/motion/)
- [next-themes](https://github.com/pacocoursey/next-themes)
- [leaflet](https://leafletjs.com/), [react-leaflet](https://react-leaflet.js.org/)
- [Highcharts](https://www.highcharts.com/), [highcharts-react](https://github.com/highcharts/highcharts-react)
- [Tanstack Query](https://tanstack.com/query/latest)

## Feature highlights

Explore the most exciting new or improved features of the new HugerMap here through these showcase videos.

### Hunger data visualized on multiple map and alert types

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/home_page_new.mp4)

### Information pages

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/info_pages.mp4)

### Chatbot

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/chatbot_feature.mp4)

### Comparison portal

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/comparison_portal.mp4)

### Download portal

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/download_portal.mp4)

### Email service

![](https://github.com/jst-seminar-rostlab-tum/wfp-hungermap-docs/raw/refs/heads/main/static/videos/email_service.mp4)

## Local development

**Make sure to use yarn instead of npm!**

### Install dependencies

```bash
yarn install
```

### Set up `.env` file

Create a file called `.env` in the root of the project and populate it with the following values:

To use the chatbot feature of the application, start [its backend](https://github.com/jst-seminar-rostlab-tum/wpf-chatbot-backend) locally.

```
NEXT_PUBLIC_API_URL=https://api.hungermapdata.org/v2
NEXT_PUBLIC_V3_API_URL=https://b8m0cvbhz3.execute-api.eu-west-1.amazonaws.com/v3
NEXT_PUBLIC_CHATBOT_API_URL=<chatbot API URL>
NEXT_PUBLIC_EMAIL_SERVICE=https://wpf-email-service-backend.onrender.com
NEXT_PUBLIC_GA_ID=<google analytics id>     # Google Analytics ID, optional
NEXT_PUBLIC_FORECASTS_ENABLED=true
```

### Run the development server

```bash
yarn dev
```

### Lint your code

To check if there are any lint errors, run

```bash
yarn lint
```

To fix any lint errors, run

```bash
yarn lint:fix
```

## Deployment

The application can easily be deployed to PaaS platforms supporting Next.js such as Netlify or Vercel. In addition, the repository contains a Dockerfile, with which you can easily deploy it on any server. Requirements: Docker installed on the machine.

1. [Populate the `.env` file](#set-up-env-file)
2. Build the image: `docker build -t wfp-hungermap .`
3. Start the container: `docker run -p 3000:3000 wfp-hungermap`

## Development guidelines

Besides the usual guidlines, we're following these as per the customer's request:

### Styling

Linting and styling is based on [Airbnb's React style guide](https://airbnb.io/javascript/react/). A pre-commit hook will make sure that only well-formatted code is commited to the repo, but a GitHub Actions workflow will also check this on each PR.

### Git and GitHub

Always work on a separate branch, never commit to main! When you're creating a branch, you should use the branchname provided by Linear. Click the branch icon in the upper right corner of issue's page on Linear to copy the branchname. It should have the following format: `feature/<issue no.>-<concise description of issue>`.

Commit messages are also linted using husky and commitlint, so make sure to start each commit message with `feat:`, `fix:` or `docs:` depending on the type of work implemented in that commit.

After you're done with your task, create a Pull Request and share it with your teammates, ask your team lead and/or TPL for a review. Use squash merge when the PR is approved.

### Project Structure

Each component should have their own file, where the file name is the name of the component. The app directory is for pages and layouts, all other components should go to the components directory. Try to group components to sub-directories based on their function. Code that doesn't belong to a specific component should be placed in a different file, in directories like utils, config, types, etc.

### Domain Driven Design

DDD is a software design approach that is against the idea of having a single unified model; instead it divides a large system into bounded contexts, each of which have their own model.

What this means for a React application, is that instead of using one global state with, for example Redux, we will have a React context for each of our entities that will store all the data and offer all the methods related to that domain.

- The domain folder contains all the entities and repositories. (Types, Interfaces, etc.)
- The infrastructure folder contains the implementations of the interfaces. (API calls, etc.)
- The operations folder contains the business logic that is not related to a specific entity.
- Bigger files and functions should be placed in the operations folder

### Dependency Injection

The point of DI is that the dependencies of services should not be hardcoded, instead they should receive them as parameters, where the type of the parameter is an interface. This makes testing easier and the code more reusable, since the same service can be used with different implementations of the same interface (for example mock implementations for testing).

- Example of how to use the container to resolve a dependency can be found in `src/app/elements/page.tsx`.
- A list of all dependencies and their implementations can be found in `src/container.tsx`.

### Accessibility score

#### Form elements must have labels

Programmatically associate labels with all form controls. The recommended method for most circumstances is to use the label element and an explicit association using the for and id attributes. The examples here are ordered from the most common acceptable solution to the least common acceptable solution. For more information, please check: https://dequeuniversity.com/rules/axe/4.9/label

#### list HTML structure

Ensure all ordered and unordered lists (defined by ul or ol elements) contain only li content elements.

For more information, please check: https://dequeuniversity.com/rules/axe/4.9/list

#### Color contrast

Ensure all text elements have sufficient color contrast between the text in the foreground and background color behind it.

Success Criterion: Ensure color contrast of at least 4.5:1 for small text or 3:1 for large text, even if text is part of an image. Large text has been defined in the requirements as 18pt (24 CSS pixels) or 14pt bold (19 CSS pixels). Note: Elements found to have a 1:1 ratio are considered "incomplete" and require a manual review.

For more information, please check: https://dequeuniversity.com/rules/axe/4.9/color-contrast

#### Aira-label

For more information, please check: https://dequeuniversity.com/rules/axe/4.9/aria-command-name

#### Target size

For more information, please check:https://dequeuniversity.com/rules/axe/4.9/target-size
